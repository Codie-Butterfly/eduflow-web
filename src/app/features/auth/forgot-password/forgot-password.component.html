<div class="forgot-container">
  @if (!emailSent()) {
    <h2 class="forgot-title">Forgot Password?</h2>
    <p class="forgot-subtitle">Enter your email and we'll send you instructions to reset your password</p>

    <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()" class="forgot-form">
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Email</mat-label>
        <input matInput type="email" formControlName="email" placeholder="Enter your email">
        <mat-icon matPrefix>email</mat-icon>
        @if (email?.hasError('required') && email?.touched) {
          <mat-error>Email is required</mat-error>
        }
        @if (email?.hasError('email') && email?.touched) {
          <mat-error>Please enter a valid email</mat-error>
        }
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="submit-button"
        [disabled]="isLoading()">
        @if (isLoading()) {
          <mat-spinner diameter="20" class="spinner"></mat-spinner>
          <span>Sending...</span>
        } @else {
          <span>Send Reset Link</span>
        }
      </button>
    </form>
  } @else {
    <div class="success-message">
      <mat-icon class="success-icon">mark_email_read</mat-icon>
      <h2 class="success-title">Check Your Email</h2>
      <p class="success-text">
        We've sent password reset instructions to your email address.
        Please check your inbox and follow the link to reset your password.
      </p>
      <p class="success-note">
        Didn't receive the email? Check your spam folder or try again.
      </p>
    </div>
  }

  <p class="back-link">
    <a routerLink="/auth/login">
      <mat-icon>arrow_back</mat-icon>
      Back to Sign In
    </a>
  </p>
</div>